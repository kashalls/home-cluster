---
# yaml-language-server: $schema=https://kubernetes-schemas.ok8.sh/moco.cybozu.com/mysqlcluster_v1beta2.json
apiVersion: moco.cybozu.com/v1beta2
kind: MySQLCluster
metadata:
  name: mysql
spec:
  replicas: 3
  backupPolicyName: mysql
  podTemplate:
    spec:
      securityContext:
        fsGroup: 568
        fsGroupChangePolicy: "OnRootMismatch"
      containers:
        - name: mysqld
          image: ghcr.io/cybozu-go/moco/mysql:8.4.4
  volumeClaimTemplates:
    - metadata:
        name: mysql-data
      spec:
        accessModes:
          - ReadWriteOnce
        resources:
          requests:
            storage: 2Gi
