version: v1alpha1
debug: false
persist: true
machine:
    type: worker
    token: ENC[AES256_GCM,data:fWc2FtGhPK38fIStSqY6vFtARovSaE4=,iv:taKDVJY6JKZAIWWqWMtKS4st/IdPySxb2NaDMRIBLTs=,tag:VjcNYTxjfMMkM2qS0Zh+AQ==,type:str]
    ca:
        crt: ENC[AES256_GCM,data:/RzXCNOCvklJuryArjnesdVSF3MGBC+Tf1ABepOqkZsOTPzC+z4r7w7fAHdTBG+eI7I/pqx1D5u0YCe6f995IE/2xBddK4+DKY/ubZWgPt8R8snJUmmwcmmzswfobkLNH5vCa0eBzlDOvlEj5o4qi6h8dlZlJx8aOVrKEAvllGOcOlaTt0F8tPAeXpAfkJN5TynoLy+EFx60Rlcp3rlQdBWUYjBtQfhoAFhDeGqFBUTzS8jxxcWGCWZiCcOPIbw7k3EZQN/27k61rp3e15sg+XEBGQ/G1MtBNjsXZN64Uhrdo1MIll8lhS61p+jy2QWtixaCoUkriOA7Rqy4j0sMvlpUhpxAn1/7TmQogGd1z1nAS0d7hBxLyqivtmkF4kcYRNw2vB12ueimtA/+jDMXkPdGGK3LmynyrKOVTddY+Lusgz58b3RjC6lnz2zjg63WZr+VfwwC9wy+h+XaLtwwidT4r08XibuPR5nhpFcLyz1T8nXvLq0MVlnWaATC9llVOAPoXz8fFmsl7Jmqifc/3+pCjLFbGiuqnKu8mRpr98rkrX/gG3FkbfPsJv9t4KTZ1lQcCthPkv0o74HvoOsXoecoOTBuEY8t8dX7/M/GUeDfevzjmZrJbXIwzq3MPqgPoALZaSIjHiQw++HY/eVMBlN0HEBSgqCz6lCGlfnr4LY9t4n6TP2hkmo7h9kG0Mbf3mOYsHz5kKKVr50k57TJvVAqmzsrBn5Vpw4DsIFqyf5MpBYf8KJmtVz71fy8i69F5vmdcnEoUOubYXqz9mM1e8V61za+ndorKn6wjC+H9dG1vUzeyc/Dvz+8nzG519cTPAFoMlEwEM6lMPOVN3eFRhrmaupO4Hw/FnExrwNAKGf74MSz,iv:SOcQKPoFrPF8cB82ogE9hWhKHBpb6kJ6Q2XM+kswxrU=,tag:Ap3qIa7IcDp2czcy09dmRA==,type:str]
        key: ""
    certSANs:
        - 127.0.0.1
        - 10.69.0.2
    kubelet:
        image: ghcr.io/siderolabs/kubelet:${KUBERNETES_VERSION}
        extraArgs:
            image-gc-high-threshold: "55"
            image-gc-low-threshold: "50"
            rotate-server-certificates: "true"
        extraMounts:
            - destination: /var/openebs/local
              type: bind
              source: /var/openebs/local
              options:
                - bind
                - rshared
                - rw
        defaultRuntimeSeccompProfileEnabled: true
        nodeIP:
            validSubnets:
                - 10.69.0.0/24
        disableManifestsDirectory: true
    network:
        hostname: jera
        interfaces:
            - deviceSelector:
                # should select any hardware network device, if you have just one, it will be selected
                physical: true
              dhcp: true
    install:
        # The disk used for installations.
        disk: /dev/sda
        extraKernelArgs:
            - mitigations=off
        image: factory.talos.dev/installer/${TALOS_SCHEMATIC_ID}:${TALOS_VERSION}
        wipe: false
    files:
        - content: |-
            [plugins."io.containerd.grpc.v1.cri"]
              enable_unprivileged_ports = true
              enable_unprivileged_icmp = true
            [plugins."io.containerd.grpc.v1.cri".containerd]
              discard_unpacked_layers = false
            [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc]
              discard_unpacked_layers = false
          permissions: 0
          path: /etc/cri/conf.d/20-customization.part
          op: create
        - content: |-
            [ NFSMount_Global_Options ]
            nfsvers=4.2
            hard=True
            noatime=True
            nodiratime=True
            rsize=131072
            wsize=131072
            nconnect=8
          permissions: 420
          path: /etc/nfsmount.conf
          op: overwrite
    sysctls:
        fs.inotify.max_queued_events: "65536"
        fs.inotify.max_user_instances: "8192"
        fs.inotify.max_user_watches: "524288"
        net.core.rmem_max: "2500000"
        net.core.wmem_max: "2500000"
    features:
        rbac: true
        stableHostname: true
        apidCheckExtKeyUsage: true
        diskQuotaSupport: true
        kubePrism:
            enabled: true
            port: 7445
        hostDNS:
            enabled: true
            resolveMemberNames: true
cluster:
    id: ENC[AES256_GCM,data:yLOTkzM4nA0uKMIMWRqm2CLORUcgzcIAB9OfUoB1TovNXBJhvdL5mYLVNhI=,iv:RKUrNsUCirj1AycZR5HkN2B4Saq54fbL8fqB1y+FvNo=,tag:3u9Giyv0XqReBdrF+tJSMQ==,type:str]
    secret: ENC[AES256_GCM,data:ZvI5E7zbtJlPleHtXSqR51GrcZLnSOUrgmJcNR3gM3ci6AqsAD0eQcetD6g=,iv:ukcjMdFG2ev+Ks8BkJpn3lFVepV/rULsNAqHJks3fXE=,tag:5BjWdHtIWCqx6HEuhInp6w==,type:str]
    controlPlane:
        endpoint: https://10.69.0.2:6443
    network:
        cni:
            name: none
        dnsDomain: cluster.local
        podSubnets:
            - 172.30.0.0/16
        serviceSubnets:
            - 172.31.0.0/16
    coreDNS:
        disabled: true
    token: ENC[AES256_GCM,data:lZ4wre/dPD9wJ+sMwNnth7yBAZbI72M=,iv:4qajXdC3aDSHJAANmEV9+k8HA1TbKOZqC0L08n11O64=,tag:8TH5JEsu8r5JDeHSOebj/Q==,type:str]
    ca:
        crt: ENC[AES256_GCM,data:zcujS//RppTPClFUD+imfxUxDOUm3Nk5zw78YvBCARh88lz/CL5XXsgUgZAm4sny63oszqF6AmYLWmLkEC+SN6gH/gzfQYDpANo3NzlMUIQvkoTmjpgrVpA2P/3/u1w/r8xTYAe9hBfc8fQC+dVxLsQKDJcoZxCsqXQfEL29Cj/g1rRpQRFiJUV5rV1MAoebTh/Z1Jmp1PxBjnXdqZkrgLjUXjUCqfOo1wZdhhw71D5SK6S+EVXVaIE6Jhm1YphWYeBhfY1th+mMJoX0rGX5uHyCaIo8V+zyeUJkv8ZsWZd5wXGYXM3gEAaHw9yPJeCfui1YXobktRUmIiFb/Z5xWtBePuLoUmLsfR7b2E7IriccNtUTiiZTOcbkegGupsze5Wr/2T2miggucvWagXdpwPjXPSnM4vwgW99rY3NnAqve0z7GCgFQtuaZu36n/aCfJZdfT7yWwqOQwKHwuLZrO+4m68M3nNOEF+2plArABdoQc8jodinMGClUdRwbXSSlU+wtHxd/Bxaudv85Si41pXkpjhyQ7UroAj0caZZJYR6vn01cUE94pqoEwJ41Ng3QKMPh7xuYzs3Hg51AUIvYlWwMPHHPkagFDTMh+S2y3DJuO/io5ojx6BxAUkI1DZGaysKROTJgTCnQVqZpwt7d8HIXwcNZVwHoHkmIjx2InZcywhGdg38r+YYjA7hliPPX4ctgLSpPm1Evs/y/QXWf6+bD91tF2Hs/IVLEsQd3bP9Xv/zngI4XIJG3H4RbyUxfb32neJ5O5/hJyGsWmxf421EoDvHB5j8B/5DImiMjtpH0nxgdIcldnsDfZo2PbrTr89oE1DX9WNcVJxNW+nvYjDbkoaDfKrz9xKPOeU5nWDiMuDrjJREphlDHb09qrIkTF0cQpkPVun/jeKqb4BTjMhvCWKToFRqYqBXSTMaHlG2aQWP07r8gd8Oqt3OzIlDCJNHVnuoS+TsiZb5uO9fmCKTjqs295xqc/ackKcxbNZLqXoiR3nqPFnWA6V1GUO8W1dWP4uX3L3bjTntvzRwU8BZJtoA=,iv:egJ4l2jC7yseQcUXYidvVRIbSszs1gfVmvo4qAT+YsQ=,tag:Z8wqM+zH51+4/Fa4AsMhdg==,type:str]
        key: ""
    discovery:
        enabled: true
        registries:
            kubernetes:
                disabled: false
            service:
                disabled: false
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age19963x2afvcsek4p5sas5n05thusjvzz7gpfknp20666u69jw44lsu5w4u5
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBwRDd4UnFuQzYvQlhJTDRJ
            VG1seldaaUcvMjNPL29jZzNlN2xVODN2S1R3CnVQdmN6OGM0KzQyRGV5RDFkbGNV
            UmhiUllSVDRiSW53T1VjMDNUc1NndVkKLS0tIFdVbVBoZEVKM3J2emNsdGozaHBn
            ejVlTjVxeVRKNmlNREl3YWRFMEZTckEKxBnoqPyqxvw7zarq4pxpSYUyFqW4eje6
            tho0zMz2FXHuSVycSwp8Ojc6nCiRyG0KIJGFgdiE1Jga9wKwRpTQDg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-05-21T19:01:51Z"
    mac: ENC[AES256_GCM,data:1XAbZeHNHcNfm+y+WeQJBx7ihVvAD2w6Ihccn6+B1dugmtJ5Gu77iT9T8Vqpr5RlynZ7q5fRON60cGZYeBKUnJ6Mx1PFIt5mQ9eOY7TD7EFm8MzUPIIhS/FcwBlubMOen6Eg9w0PErkglTIvElFfO6SlT7aTEiSAgeAhesE/CCE=,iv:rFv46KWWPYxVu/wtXjFGSrF+dDTMmJcvyqtxqkBvc+Q=,tag:mmFj96V404q6xlWtTwZz7g==,type:str]
    pgp: []
    encrypted_regex: ^(token|crt|key|id|secret|secretboxEncryptionSecret|ca)$
    version: 3.8.1
