version: v1alpha1
debug: false
persist: true
machine:
    type: worker
    token: ENC[AES256_GCM,data:dzQl1s918nAiUc71JEniGjS43h0px8A=,iv:gPJ9UvVAyPTgi8CiOAkwKHI3nVXJr9Uecc+vXiXUxQs=,tag:cV9y/x1mVEHSWwjw9r+KvQ==,type:str]
    ca:
        crt: ENC[AES256_GCM,data:RX3LlxqJXKMNfN9v6LpA05i7iM8QJtYYyyW51NjVl4CiQM9p0MAl6MGqIIvVYCrQqtMI4pWW92hjSS/C0zcn6udLUB3eHSOig4U1O0Vwuol3S9Wn4k6UyKt0s/6ztlOpuFwydlVzlP2q/qh13Lay7PXy+k12cV/NIoHuUozXUDdlRhlPEFZvtUOjyVqV8wxwMmRdX/h/cIBCznA05dfB7V7hE9U1DDRmANd3pqsUrb/exhf+LOpiuEM+TDItk5tHpqBxuY2C72oQhnfYQYJs9gbthJNc4SFuQS0Ak+ZCVQDF755okGUVZA2V1i/lqvuz7CGPOvUHIs6tXyb2LCXua/1wjTfe8rvAiSQc2ojUnIFVR3mNCvAAcdGzscR0nBKtzrhqb6/mXIsopVscwyn9jREN1nGIpOa/xnoD3cZORJdlcyFavblYezRv2yyLYhJqgESyy6uvSxS5o/PkMGVqB17XC8VN6EuWPyyLTfRO/D5IhZeHwwwzHEXK7/CvcxIhKBusBoc6rdmBDM4fP9MG7r2cQ13uUOx+itCwpSWqK30PjrE7Xb3GskcKwb69KsFtsSp24s1Y0gcUm+W5FHGcsmgmy5IIsIV0Z2J2y4lzqqvIqy5dLgSeuHKe7vNDwBKf2DdEujtkVH/RUMzLqe6VBNouelkL6vLLfpFRI1zDCfGgGLbxBAd+HM9FZSV8l9KjWnJVjaSEBXaDtsi/T4kkkmDz59BB644ZuOsKilBtJ6l/fovRuElA/jjFIazKKCEQP9i2OpovpPC/eNuWXgmjCLEzPwRUCMsxTvV3492VwDsbr2kvFTA3NUvY858ok5LNya2XsdGWMCQZ/9Uc+B3ZhNLDtrI6jz4tLnVpWq1S6zT3/Dr1,iv:HYDdb6TxXJwZDVZiNpsigLr1GQ2V7FquXHU0e2dA2+M=,tag:8cB9rP+BK+No/sbv7AvmKw==,type:str]
        key: ""
    certSANs:
        - 127.0.0.1
        - 10.69.0.2
    kubelet:
        image: ghcr.io/siderolabs/kubelet:${KUBERNETES_VERSION}
        extraArgs:
            image-gc-high-threshold: "55"
            image-gc-low-threshold: "50"
            rotate-server-certificates: "true"
        extraMounts:
            - destination: /var/openebs/local
              type: bind
              source: /var/openebs/local
              options:
                - bind
                - rshared
                - rw
        defaultRuntimeSeccompProfileEnabled: true
        nodeIP:
            validSubnets:
                - 10.69.0.0/24
        disableManifestsDirectory: true
    network:
        hostname: miah
        interfaces:
            - deviceSelector:
                # should select any hardware network device, if you have just one, it will be selected
                physical: true
              dhcp: true
    install:
        # The disk used for installations.
        disk: /dev/sda
        extraKernelArgs:
            - mitigations=off
        image: factory.talos.dev/installer/${TALOS_SCHEMATIC_ID}:${TALOS_VERSION}
        wipe: false
    files:
        - content: |-
            [plugins."io.containerd.grpc.v1.cri"]
              enable_unprivileged_ports = true
              enable_unprivileged_icmp = true
            [plugins."io.containerd.grpc.v1.cri".containerd]
              discard_unpacked_layers = false
            [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc]
              discard_unpacked_layers = false
          permissions: 0
          path: /etc/cri/conf.d/20-customization.part
          op: create
        - content: |-
            [ NFSMount_Global_Options ]
            nfsvers=4.2
            hard=True
            noatime=True
            nodiratime=True
            rsize=131072
            wsize=131072
            nconnect=8
          permissions: 420
          path: /etc/nfsmount.conf
          op: overwrite
    sysctls:
        fs.inotify.max_queued_events: "65536"
        fs.inotify.max_user_instances: "8192"
        fs.inotify.max_user_watches: "524288"
        net.core.rmem_max: "2500000"
        net.core.wmem_max: "2500000"
    features:
        rbac: true
        stableHostname: true
        apidCheckExtKeyUsage: true
        diskQuotaSupport: true
        kubePrism:
            enabled: true
            port: 7445
        hostDNS:
            enabled: true
            resolveMemberNames: true
cluster:
    id: ENC[AES256_GCM,data:BuEWBrxaFm7q/sD3uvIZLTG8R6h03WpatSTDF5HavKN2VByEO/5CuMsZ49A=,iv:BwcUDEF/OB3Fx2NGnYToRhODEz3vRIjcWeu1HkM4jLk=,tag:LICaxJC5SQd1U15T2YOYdA==,type:str]
    secret: ENC[AES256_GCM,data:RpAVvPf010xOvrI6nE9MTR9YY+sW+SzZyfk5UnbxvlMRiHyPas6tciuv8DE=,iv:wmvVGfEfARrmp8sKOWWGQZ3Gf1osuQmsXY+6yyu+SBo=,tag:1NicBcbdzvDKSxwxwy868Q==,type:str]
    controlPlane:
        endpoint: https://10.69.0.2:6443
    network:
        cni:
            name: none
        dnsDomain: cluster.local
        podSubnets:
            - 172.30.0.0/16
        serviceSubnets:
            - 172.31.0.0/16
    coreDNS:
        disabled: true
    token: ENC[AES256_GCM,data:BuFvLHTbn/OLf5ypVQpKk6315IflZLg=,iv:/qolWUmnB24wAqLOcYYtjFE5DSJTnZi6BvJFPtEgUok=,tag:bRNV9v+KIn/reiQMWCgsAw==,type:str]
    ca:
        crt: ENC[AES256_GCM,data:Jgam7afwvY71Lbd4lhrT7ah4mN/EvXlMNfG4HTbRN9oYU9fh0Sdp0Z8WANp9D0jmeWwE6nOpDKtCSaUlnLNpmqcrkK2hZfvGSdY6xlMWXCbGULMWMiboMniom+AxrLQl8V+BeKD73OySuEqtovKJvIDdzDYLb05qkzhK+hASyg9Qs0zXAdb3DRvjUvgncayHsnmBHp0j17As3rncysgEzXmOFWkx+sZOWUtRV7KvPmheF4nJjHeM0LSgDmQ6Vo0O/4Wj4ivcxbLeH9k9nrN5lfPlKyEgzeTiPSONc7n29zJbSsAGhvH3C4CNLrqIulBUfAGIfb2SpGk+/LZzzVUNmYX1nutsDcgH7txLXn0HUAZy5Iehz+yy3u1kbdfm5lzq2gmaALzQlJLmuSIDxO/ABe6fBA7MyH5pZr2s/vWvOEH/7oA/I57xEgnWlWCBdpd6HNAHuf1bChKiQR6/POwkhNgIWXRhp+7+tiqoY27CqkqFuZuPPV1ysik3eoxJEyMZBxM1TAaFrUldpn1hqnvv2TZuGXCNiIzaahr6I3X9i5wL9FZsF52+Moql27jDQ+bAsj4Cw4mf3Ym24h3wo9rIFASRGL6KIlSz5TZxSQ85+98cU0Na2fda4/UHTXlFuZSdf8W9FEe2sMizse0BHUsSvhY7l/6bpTL2d4n/qF7UA1kmeNQpbWQsLvIJm0ymwNV6Py22LdbtuX8g8djue3zwVljhfW6aRtTRVbBVi51HegRl2iXoaj8hMFahSD8/IwF2nL7VNejK4BSSbIFGJCqd9gH0eUgNDqxpy76l9DHD/fBldYuqLGPtAisuTo+hx+PJ203FPwjaaQn48A3+P4fxkRhRG44izRha3nH9PlFLag33y941HudSK5ftTOOO/wRayIt5YJTXLx5aDhE4dsRWoWzBECVxycYNxGzLtIZOEtqporPNcmznTaF5OyL04fn/JnKHTM51j51XAJnTQjd83Z+gjeJM/hbMZFa2DAvJlSt5YX19Sf6SX3vMXifeXrZSLW1tPcmkZuHp+tT2Zqi/wMaNW5k=,iv:hovKrfMV1Hi/uazFCTpocIKOffCD4y/iEsMByvLWg/o=,tag:wCM51M2VCESE0n8nT8U2Dg==,type:str]
        key: ""
    discovery:
        enabled: true
        registries:
            kubernetes:
                disabled: false
            service:
                disabled: false
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age19963x2afvcsek4p5sas5n05thusjvzz7gpfknp20666u69jw44lsu5w4u5
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBSTVNxSHRlZFZCWkJlTGZM
            Wmk5bmNOc1o0b0RHWk1CWFF5bjdyN1RUY2lvCklnK25uVmZRUWJjV2RadTVwMTRq
            eXhlbVlQMVRJcExkN0gxYlYxRDE0TDAKLS0tIFI4M2dhemdvWFFTa0VjaGdVOGF1
            S0tReHVESVllb3Z2Mm1qZUpVRWlYem8KD+8z7TxYg+Eo+zIudoLCliqtJIXRTnAO
            YuG76nhkHmswFH3HzOeay0YL9v/hGUg6Mz6vx8Y8g43EZwRrheN9OQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-05-21T19:01:38Z"
    mac: ENC[AES256_GCM,data:FniOWdbintNVDNt7cy0U8RckNtdVeeetUCJbAknoXF0wPwrpQ8vEAgvdpcrRviZM1/I7kbkoJQUaLUWa40/z46qz+bYErAVfSLLPYwLAYwuqUVP87XiCsS2D8orTb0DtIIk/7ICWLWqCbMmrEdxAJ3k0s7z3hHQCavQMvy5ei7I=,iv:uu+48Kpo5eN97dJv0VuST8ALU+CtTg2ADLEn0sEgLik=,tag:rynOqV9iGridULc9fJxhcA==,type:str]
    pgp: []
    encrypted_regex: ^(token|crt|key|id|secret|secretboxEncryptionSecret|ca)$
    version: 3.8.1
