version: v1alpha1
debug: false
persist: true
machine:
    type: controlplane
    token: ENC[AES256_GCM,data:0TSeu2GSRZhHshHYx+jK3HzkGCgitSI=,iv:vr46UVb1CEeL5M02HJwNYp2DZ859VgV+HudI4eMzUVM=,tag:27Po7KuVmwOmM513JWUiFA==,type:str]
    ca:
        crt: ENC[AES256_GCM,data:w2YL2kPTb/9wMj2fVHS+LlN5GsCbQCrSKjUWmyPOPQhr86Ja6SLCJfMnycG05PUJuStCuQrEh0pb0X7v+uHA5OOxVYy9plQ2Fl7Dy6XLrizuL7JJYrBfYFJZkSURDtMTyyJ+awdU2goyanAM8/XuyYDQRw20KkiGsEfC0txdaneq2fd0B3uLDWIzMWiS7fBCa6r41Ks6iO5HbXdMHRVLew8dfUyubW3BGnO3Kr5pF0bM/CNk2L2Zd3iMevqIyqOJ8XR1iszNlgiPotLXgcqT1QjM/BTuIVbHl1Plu0lm1KOn+5PSKcLlZ9DcL0Hg0Sk2ec7lT8r7dj0qlZq8I9PbTnOuMDNoOKO1qUk6YBHOT1fL4j80mVJTU4D8ET3WVv5fYBYpzYuGHD00P56VjtLNTxUxpS5OfSTkWuypgfIYi/57rRnvgIR976XKEV3DgCEdyPOa8OBhzy7PHwi8gLiBHrQfnbI10NdCKK/YySA8apzn80LNsDnhZoh4R1B7YrLOVBYNjhUUfwKO03AOgLVbevcrkhoX1HodTEX3ZtF/luxShTKyjIFf352xcHTunnyBWDyMxFDk+h5xsE8oEh7IlJMRFi38j8LUvNAs0Zq9nQkXoE5qJkpnGyIE2wK7hG3TdhwxqUB+X/QNdKUDtinwHQL1YcBO8/1UTtxMGEeGkttJQYmW/7Fm/BiYHbilnehsYfFLOV1qc5CeoTiZ3IKMqPAr5irPl/78hzxN9VUaK8NH2cSMCKJbCpm890csgYnaZV5NbIdvJKLpDo8E9DyFjcgRI8VscK5GIKmGb8mitB54ExuQzKW1Nhg90F1bsWaSaGZzcqYeqGTCu1LrNUEKxN9Xtc890BXhQgFc2Ooc87QJd7sR,iv:Rqtje2uU3B5pYux561LYvkkmJ0220FDfuprm1GeCPDo=,tag:x0YEvA6yRLnkLf0P7XIf9A==,type:str]
        key: ENC[AES256_GCM,data:ubS5mk5CSnrPrDvAKjgumGslK7Bh/V12uwT+I+jrENC74TuKVkLyaMeSvZB7hEGSBrcSP4sXMPuyZkJ1brCC0cnZXj/sez+EiFsKPp5V+4BF3HHEow8PdrbTEQ0f/wfgY4QWNjuCevXHPATyWT/lMM+r82+R6OXEZ1tcVyMOWalPZTAE72hrPu1wK8f0GRypM2NHaJ8bvh0PvOjsk47OViwsY73Z06aR/+RmnkcqJHsMaAxW,iv:k/0s1KNyZdMTLIBGLdDXDef6/zsk7qSRArf58zc3yik=,tag:i9rynDDFZ0/zMctagtsTMw==,type:str]
    certSANs:
        - 127.0.0.1
        - 10.69.0.2
    kubelet:
        image: ghcr.io/siderolabs/kubelet:${KUBERNETES_VERSION}
        extraArgs:
            image-gc-high-threshold: "55"
            image-gc-low-threshold: "50"
            rotate-server-certificates: "true"
        extraMounts:
            - destination: /var/openebs/local
              type: bind
              source: /var/openebs/local
              options:
                - bind
                - rshared
                - rw
        defaultRuntimeSeccompProfileEnabled: true
        nodeIP:
            validSubnets:
                - 10.69.0.0/24
        disableManifestsDirectory: true
    network:
        hostname: delta
        interfaces:
            - deviceSelector:
                # should select any hardware network device, if you have just one, it will be selected
                physical: true
              dhcp: true
              vip:
                ip: 10.69.0.2
    install:
        disk: /dev/sda
        extraKernelArgs:
            - mitigations=off
        image: factory.talos.dev/installer/${TALOS_SCHEMATIC_ID}:${TALOS_VERSION}
        wipe: false
    files:
        - content: |-
            [plugins."io.containerd.grpc.v1.cri"]
              enable_unprivileged_ports = true
              enable_unprivileged_icmp = true
            [plugins."io.containerd.grpc.v1.cri".containerd]
              discard_unpacked_layers = false
            [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc]
              discard_unpacked_layers = false
          permissions: 0
          path: /etc/cri/conf.d/20-customization.part
          op: create
        - content: |-
            [ NFSMount_Global_Options ]
            nfsvers=4.2
            hard=True
            noatime=True
            nodiratime=True
            rsize=131072
            wsize=131072
            nconnect=8
          permissions: 420
          path: /etc/nfsmount.conf
          op: overwrite
    sysctls:
        fs.inotify.max_queued_events: "65536"
        fs.inotify.max_user_instances: "8192"
        fs.inotify.max_user_watches: "524288"
    features:
        rbac: true
        stableHostname: true
        kubernetesTalosAPIAccess:
            enabled: true
            allowedRoles:
                - os:admin
            allowedKubernetesNamespaces:
                - system-upgrade
        apidCheckExtKeyUsage: true
        diskQuotaSupport: true
        kubePrism:
            enabled: true
            port: 7445
        hostDNS:
            enabled: true
            resolveMemberNames: true
cluster:
    id: ENC[AES256_GCM,data:DmKUOwmPw7zlQWn8EOqykUpWQBQGxrnzRtrtixLczLX6LXMayDoAY/NiXF8=,iv:UzJFZzteWwNI5qMw1jJDDaTdNfVaKmXqOCVAt9OsDFI=,tag:iffAIF2Ou7uxb8kpPGAJEA==,type:str]
    secret: ENC[AES256_GCM,data:0srgmFZMftpnxulD1f+7MZFMsPTy9N6oj/Ha3Nfm9BY4fgx7v3G/fP/Qjdc=,iv:OulMwZVSTEYcoxcFtvf33k62SuHEiyMvBo60XMtlsGI=,tag:s1pWUwKDoIN7vGZOG/n+vg==,type:str]
    controlPlane:
        endpoint: https://10.69.0.2:6443
    clusterName: main
    network:
        cni:
            name: none
        dnsDomain: cluster.local
        podSubnets:
            - 172.30.0.0/16
        serviceSubnets:
            - 172.31.0.0/16
    coreDNS:
        disabled: true
    token: ENC[AES256_GCM,data:NZMTQ6mjGjCYHC9bW87ok3wVRrkV0xo=,iv:34pbz0/YB2ol+utgjD0X8eZ84Bv6QvMof5KI4mYn1fk=,tag:lffHpAcXVHl+phqlnlO2IQ==,type:str]
    secretboxEncryptionSecret: ENC[AES256_GCM,data:LiAljD4/ketn7h6TvqIuvr4TtrwftMO1i/o8dLiT2B/9g1VSNerbzS7eoUI=,iv:YsouJvJiqsvZgevNsfm5IyBxgc0tr1m/1R8MxBCf6SU=,tag:5potHwQrBMnXaJRtx8DvkQ==,type:str]
    ca:
        crt: ENC[AES256_GCM,data:5VjT/cupAuPxoyMxOb4U7itS64uI9j+29McXxsUOp8IY7KtcVOdabK39APAbs3VcbhWYT2NuquDnFGnromV0QlJcpqc4VfLPVzgIFQE51Hi0kn/KuRMhWwQsZFy+RXPFFnXUz6wd3FgSxUYdgSjXKU1TGWgmFtG6SjTidk402aS8gfTjEfTSyrSCdBh5/125a9aEhfF7sIN/r8PTNwLhcdSWzK72yzpVOfQ5RQXOYB7urlXddNYX22XdWhdgA1ANc78hIU2M3UGhO5v6C00GFRo7rpHeAqSFN01Y86jZvfGLhsDonSna8y0rzPNeC6/uVwGU37+vVOb0qUNjgQuTrtAMQ12V/ToQumFVIEmB62eT4b41wPQLUCA8oDH+gdak7bR6xPqt2/Relkta2pFc6yk7b9DJN+O3/K7fHIiMEXmpUd+ocGad0u6XFUJCgowGF1564/K2411DYJmdQHEq8pzK5trdCr/JwXkNlpvH9CEqGov2RAdrAYmGqbfkweGm6EqtMYR66i8/OuCHnWVwKxKqoXq/P5zNSXfjqDkWJ8Yf15yDl34cvxVZ/axleoclUS7deGgSYWUBaB9Xdk5ys1sCRLX7rdxO8HmjUz73uk0P05KlxDsn0nhMKPe4BEMFEnzd7zo4JlV7QALFCwwaKSLonVEF/uJL6oq5oO03RJIatoHDkcIW69kI9/oeTj2UfJIj8Qqjf0vRRaeA3vhX7gmhmRc+e8/d+s/EcJIZVQBi3uw92k+kc+F4MMo/r1cqXFO6MsanWp/SY1MPCT6T1XF/+gij7EjitWPnXiAWlOt9ImX6FqFw7cCe1vjmdUoISWYslUddWmrDAqqsFc/whem9Okvf7dclGEKM4WgYTyvcXx383pYARTJynJRIzvZaozll9imLOGzJTcMRkmI9LN9rCoC5JrCIQljBHNtvU/ABKA31n9kAGVPyr8J3qoBs+L+lNzhHFFHmI0w2D92Fv9T8uSf7PnSLFU7A0TXEbhkiN4w7y81jQi++aNxbi80aJLZAPt4jtaLkRGHyBmtDeOcbgqU=,iv:E/YDj34k1MO9hcOTqmj6X9P1ZcqPgCJDs3k7dXrQXfE=,tag:1V1/cA7EQTMGfkbGQjjg5g==,type:str]
        key: ENC[AES256_GCM,data:yekmTwl6ZAOI7NN+ulZaXMKlgazUg9ZMVOzq2/xLzVHM4kLXz47K3k00f5My7LkybjBqfuIabIfgIdJiUkvFITptwhbUE3n08+12ZdmB0M8AsBT5+ItWq5fBlGx815IBNDoMj1tFAx8p25jLD4aEhpXCuykK63TLK+SmFuR0hOnxgVHCXSN3NmCKbjEeUTitYt4ZFy+HKGKes/n/yvFLh8Cs5PWdXXIbN5pWyNROl+T/+ISAeQB+2L2PH+KiLhUm4W5b463hCOzDvw+pjyzEDcW8V5YCZS+7FDeFo4U8Bn28Ekf5NS1cbqqhYfkzBjqvI+xEe+bYoXMdIUs9bFumGaOPXR3i02iIMrKhfV9pJYedJ+CcLXsyHrUS8uG0VxbzlaS42X9d+Q0XCfMusEHUPA==,iv:PqTAqtfnZcWPVBfntgQreGdsveGm3mN07AoWCYFY8XM=,tag:3HmyMSZSg2A2Ty73gO1wpw==,type:str]
    aggregatorCA:
        crt: ENC[AES256_GCM,data:RuA01MZTRN4KphbOHhOvLrDhRaNJMycEhSBF17MhCwxvQVJ1JB07CgFul23pzld3hISSOCA+X5zYa4l9Qvc+C8ptwxZRiypDfRo0Zl5Q8GIvuiPSPkV0Ge+JznTLEDTMNGn0NBtC/RyLl//oyoittNAdI66QY7DTqZ2n7mMVZhK8L5fwiMWVV34jSotTwla2Kvz1sYpOYEIssMJ20h+zZMwRuOfmFkdHw7mDCn+SVsRkc2Rqxtw6UDcTlrGrrczRMvJ/eQqlQ4oPNFKgg0shso25rUsUCOwxt+z3ymnbDosAhQdO9n2P9o6VsfiqjVYouYUfZUoy3vafZBFkvNAZRxROohcv2dSTNx5XNm3URsM+Bro7GCD5RBoL5LN2xtoSJLRDVSu+mWKAAm65gb1/b+cIM4YKExYdr5PWeyEznCHX3RNYtXNV1aFPvP57AVoy8Tm8sLSKC9B8ZkWxGgMjVQepXPehpGgT/+aru8DKsiZMOd/tGZGvU7z0S1r1QlSeg/nhpdROVGjOF+gtuRqDTuMHeI2QELnYrGR6KPrEqofyXkbOJBeLTihSLdOAJJ85VMMgyMaHZgiHsUWpy9dSHIKyg9AuFecFOFEkO2fIPQWTm6DkRaQQfaTvfqtbDFpJ+mk7N8ukk9Wle+Xed/jzEfY9swD1xURyl1nLaQl4ZA39lBgxqNDHUPE0S+/asOvI9y3MkBiFW1T3HzxVFFQQWsiC1Ma3c449/7/3IJ2kqhRPRaYn0DjQghVuVlTCzPEqzu2F0HWzI07msd72Qv69GqF4odmME8OnkEzPuwV9OhdCY4+exLDCaaSP6bKjd9KW1ZNNSV8u7MxiNhQomOnuTTl1BcAAVqmZIMS5YI1amku67w5ML1YA3E6fD0IpFyej3R269cUhEdkGGP3cSepPci/3g82jEUnISENKlHxx19fCYRjOPh3W0njSBY/tox7q,iv:UIrOu7y7lKw5dYG/7O0XDCJOY561UVhvdXgMGYCkLe0=,tag:cwJtnOxFuN+uwP75P1IZGA==,type:str]
        key: ENC[AES256_GCM,data:LYR+hCAEL7N9M8j5ZNxHChtg09sLgQ55QJk3qZBSTxRrqZ9KmXyBBpgPhfVeuqTf2tuow0SagEry9U1SrXAV2ZqQ/EMFTfISrv2wRldQKrlUCEy+N0ASQVw+XjgW1TpDqI8ka3odIQUXBlizuaAFwq+CO2NI0RQ6nNEm8p5H2UXtQX8Hxe7dNzll8rfizN2B/uIuS2ixYfY1PpJzQ5ka3MY8j+yJ0Jr1dBnTek742O7CUbm6lwEcj6eSjZ70hY0D+ca/kWNswNWI7G/UE0QuYYpY2csCrCNGMdMDaQANo6W1DDkbMnJDj5Tmbng6eOwr7CeqfbiSJk5q/8aHHGIqIzctgjjnT1RwelIdvJxtGwX1n9WLHQfNbGh13GBrGYrzpB2xHWKbkI5XfZJGmAtLmA==,iv:BCee4xy1JfosDei2uVvloViasaZzD7K241VH+vJVheU=,tag:SqciE8M7m9gH4QbYjIMfcA==,type:str]
    serviceAccount:
        key: ENC[AES256_GCM,data:qVtlzy68RbSs3NkIbQLW7eE/PAcCHaWdLYirQAybaHtTuSW87tFbC7EX4Dk3ceh7UEMbY75j3Rb2mTlN/mUIFkneJHCMr0gTagGr4+1AGjMcviNYzSm73gtxRDJYARHjZcfOTiwsmHMl3e/GFx8puXcJkvgao4QzB/fdahJbxI2SRmUyhu02u3syA8AdaiBYzEOh7YMPD6v5aF5uzZ2LMX86Ogx4TKY4Aicx6XsV5iGhA9m/fc57AVp5gAMl8PDdem3t2d0BMhBah0KvEIUSrDC9a4+P17E7XaUHwqhpp3vB6aVpoXfGyEepHkxuYbVnI5PnKp7ZIxwKGDt6gtp2EHtjP7CtjWRmnG2x5DQVyZcg0InUEmF2RdV02p+zB1vfEMdVqbQ2WVrlE8i2uv3bLA==,iv:cQmSNTdkI+uWhSiBPoe8q8YfFwG+MMH/XfwdINcmNe8=,tag:ly8cAml+MItY5FCFinYkog==,type:str]
    apiServer:
        image: registry.k8s.io/kube-apiserver:${KUBERNETES_VERSION}
        certSANs:
            - 127.0.0.1
            - 10.69.0.2
        disablePodSecurityPolicy: true
        auditPolicy:
            apiVersion: audit.k8s.io/v1
            kind: Policy
            rules:
                - level: Metadata
    controllerManager:
        image: registry.k8s.io/kube-controller-manager:${KUBERNETES_VERSION}
        extraArgs:
            bind-address: 0.0.0.0
    proxy:
        disabled: true
        image: registry.k8s.io/kube-proxy:${KUBERNETES_VERSION}
    scheduler:
        image: registry.k8s.io/kube-scheduler:${KUBERNETES_VERSION}
        extraArgs:
            bind-address: 0.0.0.0
    discovery:
        enabled: true
        registries:
            kubernetes:
                disabled: false
            service:
                disabled: false
    etcd:
        ca:
            crt: ENC[AES256_GCM,data:SULDm1paQ++BrRKJBM2+vSe3jTUTwDEoRVj5ApOmlFW9wgYqRYGOF3I4ZNIiu0Sy1kjNsR3KF5ItL4DnZh1B9sxPxKNfSL7VmymMxiv8e26qa/aAtAbPrZVIOeDhoKUEsUD5iaTCFGbk7d5cAQthzXnD2J4h7L6FP6NmnXJJAEOlFJ5aPnd4Dcx1vkKlaSrwuUOdtFtZH/+WC/hK8HZPciJkNGoZ5OytSKIonlQe8thkyR5a3f7E+4bnOG3wKLFSAisi6Tksb0IWC90uPzbnZ8wxOXE/pIzhBWiJS64p9zGY0kfJdKp//NITHm2nfzzM3n7yjOotH5F9gsQJeFzkqIn2W4zhTIwEUS8iyESjn78FondVrqACgKCDA+tyZ4jBbNaNkNyPko7I5xgLZbfSkqmK94PHcdx8ZEaIifbjOBdVmynA6nC/xhysU/3MhwHMWqAyDKkr1qOjIFMbonFyDLzQysCwMl/3ANaFPfbez5dzMQ2Y6fqmWzvnoqBNGfamrU4D3r+x9zsFJTD1Ct3zF3Z9PgGj554HJ3vs2U6FZkA7jWAO7uz7LAF2Kpz/OIWdPkuw4FKErApCxW12rfkVQka+4VKUlg5tO2tkp8yj3OMirBQlVHJvTiIlV5fL6W38/qsJvihHBhmsEhwWH3S2oqtvOv450OVUmTZDEfzJCo/m9a/wWhSE2lXx8bOqPrD8WEJDvH4YtqcgIf/ELmOaEJYvhj7m02IzeS8zc+UB0We4L0vFn0FkJsP9iQM3PAu3j0gWBOsKX7OF2lF4casTRZt2Wi1sMWoNqMxjqTetIJt3+mFvT5dKHEIhB3F2oZjqfXlIaaeEjzeUF3194CDGL0xpCyRsDWkZhMErumcX97K8zNdJ1Uw+OXoY6QcecTQdKJUZ6iIEfyVaa11NpdxSW5ODvpTLdwzt9JYLI6NZmZnA83BbL130F6gcoqrmHHFZzXHdVQmD8DpkR8VZSGVrKCIAjq1T/3w4KbgpX1xE8+H3DzRbwMV5uhTZOkOTY4/dYQwa/A==,iv:Kgy/gnPQDd67O3YYE7UPLwesyPgQQAuSLDck8sKZNPs=,tag:6WTR8jSe5l4NohH8n98LRg==,type:str]
            key: ENC[AES256_GCM,data:iQP98f4H2Jp7wQOF7mINWg/5xW3EfigR2FHC8RKZwApTY8+xrjWj9oJUDRpZOVOdw8Xp7pnUUkQih0/7rtj7OVxrVjqCA21jTLV2RiQuoeFeMgimx7uXaC61ndZhDAPGEz9FG1f5l+6bjGNPcCvarDNfWid9lkMZxxj4DA/d46tnXEhKTbweJKMaW04MaOcXLChd3NA9xeT9L7gbkM4CcBHBC+ew7UtWDpiY88ex541OZ2XTwiBWXdwWAHTgkjNKp2bD2u5zuucYuYjeKeHIqCwllXLzyV6pSmOhk3P79z67rOgXwk+mSBz5pKqbRWsNMlQo2s0FeTy7fhBBHOOIdlaP/6f1Z7Pi0OH4xM1GaMEl7q4J5OFIFHFm4KFKx//EqU2SLCSlYFI/vWvCQFCFEg==,iv:/WaUVti5eIbtdRbjS89Qep8JkRRPxqwG0XnEJMJsd7E=,tag:xU3ECd6vAIVS6sTBXSclvg==,type:str]
        extraArgs:
            listen-metrics-urls: http://0.0.0.0:2381
        advertisedSubnets:
            - 10.69.0.0/24
    allowSchedulingOnControlPlanes: true
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age19963x2afvcsek4p5sas5n05thusjvzz7gpfknp20666u69jw44lsu5w4u5
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBKWHlyWFlqNFIrVDc1NW13
            UXhkSmJRc0RQL0JTWXJOejZmNXZZdVBMbVZnClRnWTgxZ2h1cHoxclRnN3dWdFp6
            R0Q4N2k2RTlHQjEzdHpLU1l3cjl4bFUKLS0tIFd1Q2dOelZTMlpwQmhSTTBoN0hp
            aG9OdC9OY01xU2JyNmJ3ekc0ZGg3VzAKJuuqYx0FVRF7wsw3ZC89f0XV3Yvp+Yif
            5sJ0Wd+kNbXh6MUiRNJSsrJ0SjHphaJ/1HMK88EOCu6do3NL06I5Xw==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-05-21T22:04:40Z"
    mac: ENC[AES256_GCM,data:lxBBChWszAsIVx6il5rtLJrgXjKX+V4+Q35bRTxV2AavA6s/adxfUfeqZ5vWfX81rjfo4IO6DvlB7HZqWZXCyfOsM+UdNMGJDzB4VzCMXRGwBofhAVdD8Qw+HLpYIHREpv4Ik2/DoLoPmDXl0Bb+buMI4otjeMYhlhB3D8xcfVo=,iv:FD5G1zj+TcvLhZ8dbIKIVe70yUHglBBeNKyiycWyasY=,tag:sJW7JOyBm5kXwI++3HL/gQ==,type:str]
    pgp: []
    encrypted_regex: ^(token|crt|key|id|secret|secretboxEncryptionSecret|ca)$
    version: 3.8.1
