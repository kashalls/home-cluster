version: v1alpha1
debug: false
persist: true
machine:
    type: worker
    token: ENC[AES256_GCM,data:RKeOg9Zo/ayetiGNPSM1OFBbgnbaSxQ=,iv:qyRpa7az/qWOioQWKKqwJH1GUBfhWprk8X/ZBh166mA=,tag:sS8WXy//zdbVpS9diPDKVg==,type:str]
    ca:
        crt: ENC[AES256_GCM,data:xNgJTjqqUzJNON1EMYiHh9BgK2iALcg14GeESq+ULHgY3EOOo0r7qMtIEcDtigpblxRiRiGpeQFgAFfNRlCUuTCy+POlwUECAydf3dVNThvc0QWO90YaltK4+4RUajm0wD48Yw2LRhfR5MlW84rTpmKZcLdngRG4LTyHYbgM12N7qz6U1eM6BORoRBR+L7PzHJ7HcyhJTGSbgYYyAzkE8U4GK5GehvETipN/58VS58+Ktv+NCCyBrI3rYrOydUymmXqgaNfCiL1wT260PTj2KD1KGENCfUqF4yEpVeIA8YZ16qIB+NgtEuyctyyvcwvCjx5vz98Y8jASNdNWJCMs/In/Cd15KbgDlJV3MF16d9+lTwqM7i10b59fsc1CyVaiE0srmdAmo3BlH18Erb2VYJlmiJibwxs03Jl8x/4vLf7nExFuVsmCDN22zvJvzGVHhUHXyMs55eErgOl/k1DjNKvv8LVIzPWShmKEVeRMG8g2GoZ5hzmkLkNdeyXNqVlzwr8MHOCuJaxUcAKL0ox8foJqUmS/IlxyDLUSUcgcnQAq8I4ztwGQ/RVTAVh1gMZ625pIQkzz35rqyBaC5U5Fk4cE80qTuzDc4Pb5dFeg/X5PnRQp5c18HU2/RJFYYu2AstL4WYomvptSePQTLiVOhOj/lJVynFvFB1lCl9vxOCG8xKBMngw/PrwYREUc2pbVNkMPV9xwVP1z6IaGz0hL9qYcrTFflk8rc8X/W9L/EdooYxP0wFCHPpdpS+LcPaxAmNlooS1tZZE/BBMeEent8LYHqb9YXHjfhVCjPMniF6n88GZsdJ8F+VaNPq7PHkFVjs7DPYBWL8+67rWnLomiOadzBHIOERET8+/YdGoZ40Q7K7pa,iv:yClnKQfNFQEPqZ21p5PzURXo800+oUo08iV2n5LD+JQ=,tag:2qx7S+UlKgN2ggto6r2KmA==,type:str]
        key: ""
    certSANs:
        - 127.0.0.1
        - 10.69.0.2
    kubelet:
        image: ghcr.io/siderolabs/kubelet:${KUBERNETES_VERSION}
        extraArgs:
            image-gc-high-threshold: "55"
            image-gc-low-threshold: "50"
            rotate-server-certificates: "true"
        extraMounts:
            - destination: /var/openebs/local
              type: bind
              source: /var/openebs/local
              options:
                - bind
                - rshared
                - rw
        defaultRuntimeSeccompProfileEnabled: true
        nodeIP:
            validSubnets:
                - 10.69.0.0/24
        disableManifestsDirectory: true
    network:
        interfaces:
            - deviceSelector:
                # should select any hardware network device, if you have just one, it will be selected
                physical: true
              dhcp: true
        nameservers:
            - 10.5.0.4
    install:
        # The disk used for installations.
        disk: /dev/sda
        extraKernelArgs:
            - mitigations=off
        image: factory.talos.dev/installer/${TALOS_AMD64_SCHEMATIC_ID}:${TALOS_VERSION}
        wipe: false
    files:
        - content: |-
            [plugins."io.containerd.grpc.v1.cri"]
              enable_unprivileged_ports = true
              enable_unprivileged_icmp = true
            [plugins."io.containerd.grpc.v1.cri".containerd]
              discard_unpacked_layers = false
            [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc]
              discard_unpacked_layers = false
          permissions: 0
          path: /etc/cri/conf.d/20-customization.part
          op: create
        - content: |-
            [ NFSMount_Global_Options ]
            nfsvers=4.2
            hard=True
            noatime=True
            nodiratime=True
            rsize=131072
            wsize=131072
            nconnect=8
          permissions: 420
          path: /etc/nfsmount.conf
          op: overwrite
    time:
        disabled: false
        servers:
            - 10.1.0.1
    sysctls:
        fs.inotify.max_queued_events: "65536"
        fs.inotify.max_user_instances: "8192"
        fs.inotify.max_user_watches: "524288"
    features:
        rbac: true
        stableHostname: true
        apidCheckExtKeyUsage: true
        diskQuotaSupport: true
        kubePrism:
            enabled: true
            port: 7445
    nodeLabels:
        topology.kubernetes.io/region: main
        topology.kubernetes.io/zone: w
cluster:
    id: ENC[AES256_GCM,data:ueaUFZ0aJ+Mrec0UmjCAvC+ZZyvQcMi/uFN7yBzpZUn3oyIZ9zAYG/7+EDU=,iv:W02W/O31I1+7Q2KdYuFRphyrd0KbQhU3zx18COQIAyw=,tag:4XO11znzj/DRa7yHNQ29Xg==,type:str]
    secret: ENC[AES256_GCM,data:0wA6LtouHNxllD8Ei0ho0i3HMk2mfODJbThAHeo2HbJRnftxq7+5VHMdWfk=,iv:HdzQDge3DPVIsShj9zRNxjpIkmJpsehgqtPBvbHzqd8=,tag:fUFQhPQ1hixM2YGLbLBBjA==,type:str]
    controlPlane:
        endpoint: https://10.69.0.2:6443
    network:
        cni:
            name: none
        dnsDomain: cluster.local
        podSubnets:
            - 172.30.0.0/16
        serviceSubnets:
            - 172.31.0.0/16
    coreDNS:
        disabled: true
    token: ENC[AES256_GCM,data:pP9OWVxva8LGs0ItvdU+e/0+FS52G6A=,iv:Q+nfg9l1LeQme73nzxcWZrP/GkNxffhAigTk55Zg8Mg=,tag:XI8a6f4ilfkpDwFdCsx+TQ==,type:str]
    ca:
        crt: ENC[AES256_GCM,data:NUsMhlDsMT+NwVypyiVd9LJVbKc5SSIHjYmz0nRxNdPEmqDwFCriIlwsBgOI6FQJ3WZCGUT+CPtSfRSmX+7bvxeXH5Dpw9UcOpjeJvQjVT+ek1UBHEYEsQ51nGeeWK8cnnPgB6NzVk6kdno2WPsSuxJtJOYcBOANevwfpIr2pwvbupGIScU0pR0tr+Mk2WtwbmtHU08I8WfSGHpWtfE94vBtFTPhve6l9PXy4h2qLb4gwXH+RUg6bHenU+UNXjgWveqv9qIhlEgHygRU01cCpR6lvHcvLTt2akBngz7yadjqrEqXsGmsFJx4pKPV+8rA30jJxCYP32eeK4WA+31Z5u0y5/IHpeFimmtF/WrN8PecAJrgbyoOTbbwrwGFbdkN77xptT32hSDJPOgf3svVpy9oS0Nk6shK/Kz8YSjJn8bHrSExv9e+enFJ+QBZreAH1opFOeQ7/c/4QDc5f7K0uHwnKuOPgmDTjG4kuOVnfqnFczdPRKfefMaPxgg5sdEEynyhI4TDtBo61GkojfASdyZ68tsebirmrOD0Nc+I2i2LZhckYo835evFbD5eKg3Cki2X/hxxAHlcSdGIeroDKotG8UxehpP/iuMYad8RqWj49IYFH1kUE5nHlU+1CHnDXPquHhr4W5YL4C3b4L9HpvDK4/Ide9Wobi4Jd+Gyxukns942WEM9vW3NKuKoIBBzgW71d5pbqHlooR+jadwZ0R4D5Mb9LC1Ueq3S2VRUEI8hEZaIihj/O0uRcUE4iQcQubErJUPg8khNZZkcS6gWeeGMqvHKG8ll4NR1iEwepXPngX1MmdkknNB9WXiDb1BDBFBgB+OriNvGLG43jmOmjB3DIa4KhcHCd+clQ88vlH/nj5YijiFkt+UWlHl8ki0lvCKVQZgIoA6+eEnkPZRmCpV1JKBbCqbF/8DsUJpftbvJ2Z7gayy7A1RRJS1rL7MZbV5EyUcMCNZi9CscaDXUt6/oLbD9WIODz8J3IK6ZXRvzFhbchOeFkWJv3ALzxvpb/lqn8dSuKXdDTWJ1D5NMuCs9Zm8=,iv:PWTh/iokWfIFh8h8plYDilWcapfHdUkXOSG0/p17pTQ=,tag:Uh8PGQLsZN84dg7MFPl0fQ==,type:str]
        key: ""
    discovery:
        enabled: true
        registries:
            kubernetes:
                disabled: false
            service:
                disabled: false
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age19963x2afvcsek4p5sas5n05thusjvzz7gpfknp20666u69jw44lsu5w4u5
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBqMThvejQ0NTJMMFV0N2Vo
            UjBCQkw0RCtFV1dZQ0NPb1JYZTViUmNURGo0Cmh3L0pVUmhnWXJEUmltTnF2T2V6
            ekFwOGpnYUFBb1crN3c3RUZoamRlNEkKLS0tIHZlL2VRRHpwQlV5UlgxK2NIdnBr
            RDBEeUxxb2VjSFE4VUYxUU9mOW5QVWMKjBZcBsF6bPUBI+KA/ZWXBPo9yf1WlVfy
            gMtz8asICKSjVoRPJshqXKHBeCZZz7WZdednJ0YGV8VIb2COWjal5w==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-05-08T06:29:58Z"
    mac: ENC[AES256_GCM,data:WuTzXDqMaQxiB4pm6vklKuEUmsTeQPRZzwsyzTnIF3+zqi4RSDVPnEGC+KrJBYZWpJkGwFxwyg+FKmfuXXBMDKK2YPOGSbDkh/Apfb8kPrVbc8tgIUPJy0UTvmq8fx8NpQL6mze0Cs7R94ZKPKAiUYMnBEeustbt28KQHuIrBqc=,iv:KsNjd7Eir0q6dBoDOF7UbXkkFSmzAlAOxzgksnFCxT0=,tag:6lSjoq9LSHEjc4ATMpAsAg==,type:str]
    pgp: []
    encrypted_regex: ^(token|crt|key|id|secret|secretboxEncryptionSecret|ca)$
    version: 3.8.1
