version: v1alpha1
debug: false
persist: true
machine:
    type: controlplane
    token: ENC[AES256_GCM,data:65vU6Z3GdX+NqAy4rFGb1+dAKEtizJc=,iv:9DMyzSSgWeskO4XKqDSYFq0j3DrCG+uXKTtdfmrEMQ4=,tag:hNn/sbsHetCsYMzNY44rYQ==,type:str]
    ca:
        crt: ENC[AES256_GCM,data:T/YuCACATBDyVrBJNpqbP+bu9E550/7uqWm/QxNniQJt4hcA2nk1N2cym+PhAAxeaEPyndej17DYl32P8vHElJuYaqeyRWV7M/5NgKgv1N5akOOBMDu5ORp89yBRWjc4FGGcSVJid44g5pVav9aI/A/OZ+Bd3qSK/o81JUM7S8DyoH8SZS389/QzSl+mS/JBoN14kknq1f+sFGHFqx/y1NGEnEAX0u6Wq0vzXAcke0iJDMsY3bkMshQytOGLwV7QhnJuqVFa+A9cyxfU59OQ6wc2SPUwCmL9xMaoHE2gJInpme+3Jn1qdpNXUcLBXXP7Xe+MnOQEFdrHwOUg4Zrx3qVSX7gbcvKh+Vx8FI9riMqLqrPHTH/bNTUNKwhxCy8AjcYthPBzyEFkxT1c5COB3FjZE0lLATI37ncTDRVfLSwJ+Q1dSB5HCNJZ1LcjQM0Rqx/85as2X0ySbm0V9ZQkVYRd+xPput3wHBMmQLKBuXa/i7WowjpL412W+vxJXUrKPUMKh+zrLfWui4/3BLFo2SBbRP+6bQWOTNJeL58uPQLGiIAIBrPBjkKuvJzVXBmW5HegwZ5g5Mivzi51JlGcTms896zcEPYmSGpwkvt/oEHIHMZ6b6pB8GDoY6npS5qQqiL3aZ5j78ZIT5iXhFxjKemm6rkDTnN7vev0Bk0fFvhydMXhGUy6YLxKN37w5p66sW4hZjA4saTAMviCyYq/tyDmHXEWrr2Z/ayGzK6Pm7wKvw9dgSIIqfq//sE5DjBklFjMgGvyHnAboIVF4y4ncBlVmJi8TTK6kx5W9/HC9Lhw3m16vmUFVC5M0Sgximfr7n48qCwhogExrwNyHISPXVxjWhRJKiZmtFYa+qCpWBVg+QvC,iv:+VOljNcII6UXFPMp2+gXhuQKAb0OCIt/aE+X9iUWKAY=,tag:5Paid1T1QvzLv/bng7wUUA==,type:str]
        key: ENC[AES256_GCM,data:vGzj5HZkBZRDHhldUqDia52T4MI87WuTWEzJHZuqEmZMoTrrXWfF4+euPM9szH+zaUDqnnRxGWPn5+RuQGeklFcWTNWEaFowCL69DMB23P+pfLrSJTh1oLXwVgnuBxTUOSKgeIs2jRlqbn0/9nrtnWkApQ0lS2peYvel97ieRVg8vU84lQPIyYCHRLo1GEIdWZRZs1pmWcoC46wXpCZYxL3R2xj8xTalrn01z5HIjJ9H+sjS,iv:rbxMhblAg0U4lc/0xepISmSCT2NvpXO5Nwjkv0HxWpw=,tag:RVtpyrMZXxuCvifWhk+6nQ==,type:str]
    certSANs:
        - 127.0.0.1
        - 10.69.0.2
    kubelet:
        image: ghcr.io/siderolabs/kubelet:${KUBERNETES_VERSION}
        extraArgs:
            image-gc-high-threshold: "55"
            image-gc-low-threshold: "50"
            rotate-server-certificates: "true"
        extraMounts:
            - destination: /var/openebs/local
              type: bind
              source: /var/openebs/local
              options:
                - bind
                - rshared
                - rw
        defaultRuntimeSeccompProfileEnabled: true
        nodeIP:
            validSubnets:
                - 10.69.0.0/24
        disableManifestsDirectory: true
    network:
        hostname: august
        interfaces:
            - deviceSelector:
                # should select any hardware network device, if you have just one, it will be selected
                physical: true
              dhcp: true
              vip:
                ip: 10.69.0.2
    install:
        disk: /dev/sda
        extraKernelArgs:
            - mitigations=off
        image: factory.talos.dev/installer/${TALOS_SCHEMATIC_ID}:${TALOS_VERSION}
        wipe: false
    files:
        - content: |-
            [plugins."io.containerd.grpc.v1.cri"]
              enable_unprivileged_ports = true
              enable_unprivileged_icmp = true
            [plugins."io.containerd.grpc.v1.cri".containerd]
              discard_unpacked_layers = false
            [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc]
              discard_unpacked_layers = false
          permissions: 0
          path: /etc/cri/conf.d/20-customization.part
          op: create
        - content: |-
            [ NFSMount_Global_Options ]
            nfsvers=4.2
            hard=True
            noatime=True
            nodiratime=True
            rsize=131072
            wsize=131072
            nconnect=8
          permissions: 420
          path: /etc/nfsmount.conf
          op: overwrite
    sysctls:
        fs.inotify.max_queued_events: "65536"
        fs.inotify.max_user_instances: "8192"
        fs.inotify.max_user_watches: "524288"
    features:
        rbac: true
        stableHostname: true
        kubernetesTalosAPIAccess:
            enabled: true
            allowedRoles:
                - os:admin
            allowedKubernetesNamespaces:
                - system-upgrade
        apidCheckExtKeyUsage: true
        diskQuotaSupport: true
        kubePrism:
            enabled: true
            port: 7445
        hostDNS:
            enabled: true
            resolveMemberNames: true
cluster:
    id: ENC[AES256_GCM,data:/2VuUA5g6kjMMIfuNJYkmql2OH7OZPL7e/oNsTjz5503jxu2akvfwgAleF4=,iv:+Py53tF/PoqmUVkfkELtqAlc2mKk3hCuL6PNiTRR6xI=,tag:eKbqcXTbxWUelwHK3J4vDA==,type:str]
    secret: ENC[AES256_GCM,data:QpuoGuBGFRkwW9+mKcq+onxzD6FYw9LjrEqyO/+ixAHPoP7sx1Emh1lm67o=,iv:yXjRECIgONNiOcbOURkCq21ukYBhJCmxy3S9jK4C4fs=,tag:Wv4oDKgyXbX9Ejfz4sMtKQ==,type:str]
    controlPlane:
        endpoint: https://10.69.0.2:6443
    clusterName: main
    network:
        cni:
            name: none
        dnsDomain: cluster.local
        podSubnets:
            - 172.30.0.0/16
        serviceSubnets:
            - 172.31.0.0/16
    coreDNS:
        disabled: true
    token: ENC[AES256_GCM,data:p8jYHZElkQXxfui5oqDKgxBGngx1rCs=,iv:Ey++Qi+5FvjUT9XwOvlHFz+bTHd/J4PoQJ76NOWR31Q=,tag:UvHfebf+W8u2Lh7vlKY5/Q==,type:str]
    secretboxEncryptionSecret: ENC[AES256_GCM,data:99ZlTN3Ak5tjwWQDpUS8h68etLYnh1pZeDpjHJgx6R/PcjjnqKUf2Xa/kVs=,iv:tAPWEt5V/K99qk3h3ksRtIJ1kCCxBefLN9JCDeonCpg=,tag:tNSoj8slLuirlZBaAn1hSA==,type:str]
    ca:
        crt: ENC[AES256_GCM,data:zlH5yI7nEqgR0ydMHUQ+Uvssqvbsn24u3W/RLOYJQd+U/0s2OVUpmYuWiyNcGLh3tYFdH1axhLtMblj6qhwQdkpxoz6SwwXOSaqh1Fve7JHEOsCBpflvxaGqssgMmF/YXi3mzUW9p8rh+aHC729YA7Bz8ElTq3NHgLS5lUMeYwioVsI1mhw1MqfnpxHR8hsIsiyNXA3fjx6c6a+9k1Uob38wosVI5JnTy+zJU99OSwK7gIxcjXGgZlm3Xj11P46Mw1MPH1Z37DziHduvfz0P+opOHIW5h2elNU9Z/PLQZSZZAPrxhICBqNWAS+XZrkRvdJ1UXlX0BxoX0Jq60mJn21f8V4GgaJVJo/zBvRTRrgrQRerx8HQcm5pKvaf1zuwggICx3hMgIAult+RbOkG9X+Uyin0d0H9gqhykbrmYRQnVnKy/FielWdPrgVEdjglyCbFNz91xORRslhJL4mTBm32SKM2JACu2lDwu//B0IsOJEFnYTkwrD7hMNiSx5QToRQ7Pb4O+TghzW5fGFRvA7C3sBtP2KbgqGBTTiYZIEdUyQ1+ar0RVhb8rVqB+Xt0bqM0muyIuRhs1nQQOuAV+Adn7Eb5oszngYCDdvvxcHuoS4kprBjkTNwshEqgqLFe5OZHaVVfflHW84VnSOgkyWfGxh9L5R8a2NJnUzEw8eSQsCmqA2+KjZ9XPpfoFt4EGdwGgD4a1yOLQj39Ttkvol0V9jTAGSUXWNopoA7R3wWHfztkE5YhDn73VspykL7Yrt7algukgqA4JhaQYnFJstY8b5OhNBGza980TC9ISfSUeXztmzTcQJXp5oPIwqpt4au90cdlTBx8vb6VNofM8I7JEyZ7AfBa+KT0boq0f4T2pt9w+0v4AluH7XWyENaXC5rSH2QkuQ5xBJ/0hUnWP6wtdlS4JIxH6GpU1k+HHCaip1oo0kPxXI38XPv3GwXY1TkdMqScirqXd6+r81x9fGLscohU2cTkv6Tiw5ndPlBcfMhd8KuPWiGVHeyznqHePzhGk79sN1emwJpPDf5hD6GUFBnA=,iv:3XjM71gtr38cTPUSIBJaRkPRpXnfJmHv4SnQUY6SCek=,tag:rnQA09VzCn3FJunPbE9I6A==,type:str]
        key: ENC[AES256_GCM,data:cZqKi3l6dsP6clg5y+Hw1+bKJSmvoGTORZ6895AvUVdgc5KhJYZIWkhvRn0GJfBHrlC0fyum3wnGpcpaYmwpdweEG7Fh9xeeIM9r2xTG7PsN43/PjzIYgkptCeNlg9Dhpoq2Vk6tsm2O4wjBwiO+FOrKczaEg85qaQebSpdJ7D1QCxY54Jqd0KqIoH9VZib6MnkgybasZwJHJf7Jy22Et0m7uHH9VwH3Of7hUYZlNbZHXo90WbXImdRgjWjz5EUVFueoI3sHmigP26KjLPdFiFvxLg2LW7kKxsB4jbjOvxOoWhlnBwSit+i7FOEBPucfXkB2D8cAHZezOjfUtVH5xzIEel0g7cqIlz5bCekf0cq6s6Ag1GkTBFwJx0t46MfuEeoHvb+g76XHINbh7roYZg==,iv:vHvR8XOxnMeduf4pSX+j3CPo9Cb6e7kPvTEOUYXDx2c=,tag:AZcZGWcM/rupGuWn0Ymx8Q==,type:str]
    aggregatorCA:
        crt: ENC[AES256_GCM,data:hzS6G/CzhwI7MPscRfSuqU7/jXOxY8SCZUqMphEb84FpTNFEj7DocSEHR0wBSEI6WZRVqKeWecDgGUJ2B34pQYS7gZk/Uxs+AAChLqr0/JMjvZ86r4jM4XdKroxrCGdLrYzHojHfk5ifQ6vbfORxIWVYEWIJm/7bFSzKMSyxNFU7wfYoYjZzPk/LWk2LhwiaWBITO1llTlHRQVmo6RbARfZ2RlnxPnU0WuQpSCQuofQzHkxCgry3cGUpk7CiZv8yFZ9FFSt4yNdWQGyGWhGRvrZly5k4nLKhNzyI9Tu0n8F/xNe0Ksoe31vFQsSYyMkDh+K9G5jywARv9JIztZ8dcYi+A3vM+TIHJWbik3XLlj3kbGilJUyX7+ecj2FnTRWUEEfeqKROQ2vvkGFRc6gdnysLuplzkcSDtAGvdDhy3kKV012mR54GHDjHb3eVvzgNUVxm0O/CB0tn+qPFxB3iwuR9/e1AvHIS7eX1W98iciDLxdmD0RaQuNC81jXI/Z+S0omY9S/HgWBFiO+K91WMHYvIM8toxIhgN9tGup+ucV+Yo0bZdA7w7dCZ6+CQ81Rg2R/Z2NDN+4inekZBqbcAeAg3E2PcCVpqNkHMHjLU+u2tVdkKhbry5GVmQGiOJZeitVc5zmY8oJ1nyczSs6iYQBhNqau1g/A93n6Ix/7LX1x+a7RGMzmelbfJzd4mSCxO8AjHm7/QHPNaF2FFI+vxlDR5ab07mN4B+bd25xI6YtZUmU4/isO61nYxgxoXGpf9EgQdPExa2qq1m4ql7vSWpEY2KlOlxH+vn2w3u8/W/Hb/c5jrEE3RNcTNL6CmRN0z4Hi8v98pnFfJNOrl7W5wR7AngO8e8zJdPbBWXVRMO0hjxI6sKRMDFYQrx8fjh/ob7p1ABTo5iJxJKKsKXYtV/wnc5DUKozs/RjCJfW5F0zofzvJeEuENl45kCJsIkL3L,iv:AVJcyDwBrH5rIEiKHbZKFuNz+KJJVo/C9V0SwurdPTI=,tag:tYVSPtgHq0i3xBE4/lSf6g==,type:str]
        key: ENC[AES256_GCM,data:/Kp9Cxl5/qVWea9hw2o033DALVcKtNOLcopYvmyKm+koxP3XuxgVp+IO0q86DGqXXNtH6oU5b+R+gD7FkkriVy3ygZCANMgaq42wYqyETFioqK6dOoYZe/YDDTS7TvDmS//wylmVDPbF3TW/QOO4P0WrpWXwAZxKuwan4giobyKN67EB5Js88P9Fv6W7obV8laWyD/e4YxZuiURBMqvExXLVKb0RKVpcw34S7bqHC8qRyk5RnEmPpM1JFsfdFAOGqCCQAxw9hifIVmbMjm2B/wa412+S7kbPDWvou8HCyzrC0/NkVCvIYJRT1LPz3cFRpv63mqyuupupYo2oeE0EVqMJr0E0GKoJvmvAT8PD+BgauRa5Ftgs733dlDsc3MYRUrsYWh2tbZwFduHDzF7bZQ==,iv:xFUzW3Niqy+JQNbUvyBTJcBUtsXqX9IrUYg/f0NfKp8=,tag:jVsv4nkvjY7jvePwIlUxMQ==,type:str]
    serviceAccount:
        key: ENC[AES256_GCM,data:mVoj+IB5LpNXBVqiTBYR6HHTpOwTnKqBiH1GOGaryim0ovhgT6QQ02c25Gt0nF/la1udjlcHLiTzY+SThMyGhQlSoemarvtHuHOhLEE4GT8ssEl0Fz6DkkI5SHrRL0EmcZ3GVISdjR89de23gsPh+kXaFHeEk2BKkHL7KssUOWa8UIIhIh/Y6Zrq4ZfM2fnAOcAvvzPthXeVd6wcl+0CtfuaBPKPSFU8l3F5PISHL9l3OwsNCwMVvddIYr34dUakIha0mIETLF5bSP0NgKfyLFggkM+7AwcJi/B1/2JRHDvePaHX40P0rdGtQTwPjoyrGXivMOsbYevKtQVSgZojK2cCw08mlZEIJd6saYP6jYEz6i9VN34BRqUniWgZqhEps1klZdFKZ1vGODg6AnguLw==,iv:7mJCIebUTsSYPJK0PPnoiZ2Cd4U3cJk6kADQjndDP6I=,tag:U0Y7EG9yixCUZCp5ZXaOmg==,type:str]
    apiServer:
        image: registry.k8s.io/kube-apiserver:${KUBERNETES_VERSION}
        certSANs:
            - 127.0.0.1
            - 10.69.0.2
        disablePodSecurityPolicy: true
        auditPolicy:
            apiVersion: audit.k8s.io/v1
            kind: Policy
            rules:
                - level: Metadata
    controllerManager:
        image: registry.k8s.io/kube-controller-manager:${KUBERNETES_VERSION}
        extraArgs:
            bind-address: 0.0.0.0
    proxy:
        disabled: true
        image: registry.k8s.io/kube-proxy:${KUBERNETES_VERSION}
    scheduler:
        image: registry.k8s.io/kube-scheduler:${KUBERNETES_VERSION}
        extraArgs:
            bind-address: 0.0.0.0
    discovery:
        enabled: true
        registries:
            kubernetes:
                disabled: false
            service:
                disabled: false
    etcd:
        ca:
            crt: ENC[AES256_GCM,data:iiA9+A6xoMEy9o8EAg1rh+O6QGwtx5t3tK8gx9MjDOp1HdOb8cvjqK2j7wa9Vtl5B8hR2LTDAmQlTMGacJ+s9JFRpwT1PXVWroN/xNOySWAnN3jEkIYUD3mkmKZw1+UpYRyNEpnyGNOc74HXggmGQByW5VzRdV83QtOtpiayKqhliNIkYYUOQ44zqeT1u0cY0o9WoAlFhSAZDz+r8btf4ks2m/MwMmjNqflCpMiAf/ipgsZEIg+UI9EdYpv98Q60ZUdLv7nHhQqj42/vA8Xvfm0ysHGvZjFExAk3hF+AB3ZT/j9rMBV0Vma7Hphyfz8aj4RXaCw2aaRLw2EER1HoHfK4MQMguYPeRLjO5A3btT0GuHFTGOm0vvgKrwVu8oKAejrkqBERUV1zRLUy/0bLLlGLIxEfxfCfUQdAgPL63FZmRY0DzdRyLfKkUJk+90zpO01/Ie/hncXdfKgZb11I9njipzTxPTpnPZqJbULqgMZimtHD0E0xYQXJcvV6fmk5OCjKea/dbTikqScInqnYoHS0trgJ51P4S2R2R6WZuq8j1yisQX/O0PP2eUqoyQhoy0cqenj+2JEKf8dZ/ezN9vESxaZSXHqaLxkkLtgXuy2XdO7RVnRMOWDLGT8A5pTjVuQEKpXgPiWB3EihlqAjdtHQHdubN6RhAuN9czYq1bRBUjIXTUWL32Kq6FhbRgrCzYLiFxcE9h0P9anixjVJeSuAi1NMJlukdurdjfRHbDXZPrwl7h3fqP5DhPQz8SYreHAnECkeCmgFoKnkmncR9QEAqOS8ZhoZ2q6MUZPrONIo+d+NWhehMjJcg9c5z85catzaWv5WO5FnJdpF74/RxBN5PBWgeO0UXa3dwawnMlR60SJCSJIUkwjIMO7g140u8nIiMWYA4BeQ8J9QPodj36qidIVvn6xpSGTucw8c5/gFHmlPG/m/NtcLEraLM+VJdgeudcQ7pvd+8muDVGI0tylB1Dz30V2fPjTXHj3p2mQiWqxXjEA2+ZUaLGdx9MRvETzHAQ==,iv:qHoT9Syof1yCPy1hXr9mUqM2AbrZZyWp/hHLYJ5MWmQ=,tag:3+Eyrp38ot7QsR6Rl2kZaQ==,type:str]
            key: ENC[AES256_GCM,data:tmkztVUR3a2u1LDswie6eX3SKQiyMt2kZayXr6L9TnJN0yXeTsoBHAZVnQIvQZngsRKm483QOlKCanFMkSqQWA8WMUcWBe+lwXUiynfws9XtwhvPpAKqssal36LOb6W7ewDFA8/FkcwTdsPQlBKustSuhR5LLcivBbO8LbGJhMHP8/eHsVYeEhCfF0UP6KtGCLxhCbbpBAi7MvIQNhvjbGFq3OxkMb9VIyGM3zVi2u/eSf36a0abK/iT2lKaPHQViXsChF2yBZtkUNPGj8uqyfVLi6srL4gndmE1V0clfNJzVp68Q/fpPpKfjHE/nxeEQSDUEVTLJPlKq1ZoD791z2b/8jWTVofDxmO86j6OQzi6V5B08bEeaVanqBs20UWoEKQQlKL8oIsNpMi1wR4jpg==,iv:GSPJmmCnGUMf7YPPXOnS7IsBsOQz06BDtdDmRKhPiVc=,tag:Fd8xcuA5MwN0vGGxwRAThQ==,type:str]
        extraArgs:
            listen-metrics-urls: http://0.0.0.0:2381
        advertisedSubnets:
            - 10.69.0.0/24
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age19963x2afvcsek4p5sas5n05thusjvzz7gpfknp20666u69jw44lsu5w4u5
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBJRVNaNWFjcVJlSjc3dkRi
            Q1pWOFRwQVZ0dlZ0aG14ZUpsai9XSzJUTHgwCm9odFdpaHBoNmd5YThrNU1ydy93
            bkpkazFndUdTUTByZnZyZ3d1cW1yNmcKLS0tIFppQTJjbEs5TXduelZRY2RFaDFG
            NGdadWJ4TDBqNHRlVUFucktUN011OW8KjwM9iBhpNG9btCKcG1RZE/2x92uGGO0l
            SSozDuqVG/hU6NGricbcQnpxf5INyxwKZ4ummXYHOplLgo5ni6h5uw==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-05-21T19:02:30Z"
    mac: ENC[AES256_GCM,data:TEo+W3vDcAV6Q8EHL2LNUO5H19MS121/TA8GjGQeTN5ygYhzwzvclWAfg9C8WdIJS6FPc/PEZHu46sC66vGwo3yW3oNwgfKTCoF9nmpWtTVuJuJC4O1KxJ5O4D0m3ShAfLaE6y9X+mJR9l1uQU4/rQpmwy7eDqtzedqeKT2aq+Q=,iv:/Te4BDd/1q3bN9b1Dm2KBQq7K/OIUygmruu+nwclP6s=,tag:LEfSeKaKqeXSaGJLjZhF4g==,type:str]
    pgp: []
    encrypted_regex: ^(token|crt|key|id|secret|secretboxEncryptionSecret|ca)$
    version: 3.8.1
