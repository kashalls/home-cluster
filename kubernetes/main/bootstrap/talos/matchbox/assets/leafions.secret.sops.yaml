version: v1alpha1
debug: false
persist: true
machine:
    type: worker
    token: ENC[AES256_GCM,data:OxJegMSSVpB9SAugF3uk9D1S7NkIRmI=,iv:A4OEXcPjmfb8bQlZN18PI84GCpYj19Ozf3hS7s8zpsI=,tag:xgR+8Yf5SKRTcvnu50iAAQ==,type:str]
    ca:
        crt: ENC[AES256_GCM,data:z9eftJF9Y8gEbipyTexdHmezWGUtKnhbFWc9ypcl7i4kdUTqVcsFOqej7eKS7W43oAT4kyIUz8M6BM8ufjIDr8oGnTryIYyrCvDtSsyQICyZL7ego+aBfmX5yf5SEt4M+3y2a9hYS8PEuqZqL363mhGN3+wLZIUvNI+AN6oi4wMZt7IeH/ZstvUs+i5JEJTDLLUbJ46SGZzH/te1yGXjSo3Ivpv9W+X1EDvWAkMsXT+CDYDmyVidCl49IpXwdlmBSJRky04R8YpGpi0zf/sjmgcWEK2UaE/KwsYlfW7KDlkoMR7g53lJyrT/agqtEosRj75eXmsYFHmzGN8mtGuXWpBATvFW4+3xuKRAbPGAVxMl9BGAlNicFzNPcG51XgQujSZqvoYKIKa9utHci6NrQoPNDIzhWytpWQyjAOCb+Ir/p9rASSB/XAnDn/Bo0fs+RnlgJnHAZnuIDIDbyZd9/wSaMyBsRW0RxfnqVap6GTITYpTrD0qhEiAXdVkrREi/WgNvJ89rr7ssAcRslraJgp9IJ9MgTHC5/cVbXPAIrbAo/XqrYmzZvixUyHEslfBH9BwOcu7F+ObLqX0S0dhbKMQiuu3Q5iQc9vQXL69speqJJVAJ28QxeI/vsMGDkkn4XmfEVBXkrwwhKLRflJXh+s5Wp1RKdqNFPUyi0kLSAFV1eQ08XGPsgVPP7bxg3lRPwKrP/D6uJlwGxbf+mcphMBul1hDvNDxD+28MNLG7Edoe7sF746Jq6kDBmW51IXhOHBHr2y+f4YTWk1yyvwS/O2SOrSGwU/sHCHHCja5cf//MPXWej9lrteF2qpk9UvmUjrVuEgfVBRuZxHN3JcdIaFkLVqer/zJgYMlijgHB3zPVi38F,iv:4wp6Igj4GBjxBL7mMKJOXLGB3Ve0M6WE6TOm3C9YbLQ=,tag:Nepn+834D0lwSLe5kZ5Fzg==,type:str]
        key: ""
    certSANs:
        - 127.0.0.1
        - 10.69.0.2
    kubelet:
        image: ghcr.io/siderolabs/kubelet:${KUBERNETES_VERSION}
        extraArgs:
            image-gc-high-threshold: "55"
            image-gc-low-threshold: "50"
            rotate-server-certificates: "true"
        extraMounts:
            - destination: /var/openebs/local
              type: bind
              source: /var/openebs/local
              options:
                - bind
                - rshared
                - rw
        defaultRuntimeSeccompProfileEnabled: true
        nodeIP:
            validSubnets:
                - 10.69.0.0/24
        disableManifestsDirectory: true
    network:
        hostname: leafions
        interfaces:
            - deviceSelector:
                # should select any hardware network device, if you have just one, it will be selected
                physical: true
              dhcp: true
    install:
        # The disk used for installations.
        disk: /dev/sda
        extraKernelArgs:
            - mitigations=off
        image: factory.talos.dev/installer/${TALOS_SCHEMATIC_ID}:${TALOS_VERSION}
        wipe: false
    files:
        - content: |-
            [plugins."io.containerd.grpc.v1.cri"]
              enable_unprivileged_ports = true
              enable_unprivileged_icmp = true
            [plugins."io.containerd.grpc.v1.cri".containerd]
              discard_unpacked_layers = false
            [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc]
              discard_unpacked_layers = false
          permissions: 0
          path: /etc/cri/conf.d/20-customization.part
          op: create
        - content: |-
            [ NFSMount_Global_Options ]
            nfsvers=4.2
            hard=True
            noatime=True
            nodiratime=True
            rsize=131072
            wsize=131072
            nconnect=8
          permissions: 420
          path: /etc/nfsmount.conf
          op: overwrite
    sysctls:
        fs.inotify.max_queued_events: "65536"
        fs.inotify.max_user_instances: "8192"
        fs.inotify.max_user_watches: "524288"
        net.core.rmem_max: "2500000"
        net.core.wmem_max: "2500000"
    features:
        rbac: true
        stableHostname: true
        apidCheckExtKeyUsage: true
        diskQuotaSupport: true
        kubePrism:
            enabled: true
            port: 7445
        hostDNS:
            enabled: true
            resolveMemberNames: true
cluster:
    id: ENC[AES256_GCM,data:lXV6/vSJq1skW4+++smWEPEtevcxy5uUEMYCVQVjCcaCzA2It532LDHuJKk=,iv:TpF2vhBaubpuaFugnHOx87ekWj/v1tDGitTzcfLLLFA=,tag:rXTH0RiQhnyOfE+Wdb6Ndw==,type:str]
    secret: ENC[AES256_GCM,data:vBKeou5eDgwoC3trPwfwKyw1+isUGVYUfHp2sV0gphtJPg6sH+0QkzCaM1I=,iv:7crIilSNVfp66SPxxJgRU3pp0/tdA3aZqPM1kxI/f2I=,tag:bWAPS552mzw4xGnKjP7yXQ==,type:str]
    controlPlane:
        endpoint: https://10.69.0.2:6443
    network:
        cni:
            name: none
        dnsDomain: cluster.local
        podSubnets:
            - 172.30.0.0/16
        serviceSubnets:
            - 172.31.0.0/16
    coreDNS:
        disabled: true
    token: ENC[AES256_GCM,data:Casp+wBgPa3Wf2OtGE5kXKFJ0raqDRk=,iv:Hv+SHwxzQ9oaopN3YS5sHf2MnLFA38pqOBsC9vRxtlk=,tag:82AvFLUMgedmi8eoPrExzA==,type:str]
    ca:
        crt: ENC[AES256_GCM,data:kIjj/GlSNJK7Rv5rbNSzhN1wUV+i7cF09iK9W0kVqe0DI3qG3duvPtl0aEyNt/vCyAUzSm3gVBx3lQwj2FR28e20nTFh4KMbKLdhC1q2Ax9pxEy4lDWm5+k1fyUiM3GvwpsTIPS337F8G2HyHgjtVsZ+ZzhkXqO1bWOPw5vJJO4o5dFdUYgfhNzfZ6maE0GqE7X08vr0IvVJFju6YsW7/X6+cS7Cwa2yuuPOAxIGBE/p7UsOpAekSP49VHpmI6xOHT2eu7AnVGnn36duMWcfEYE5Sl161NEsF+Q9aMKhv+6EgC/v5LU4y+/y8SwkX4lF0WAKGErJl3CP9JOBi0WVzKu3HVK2VOKn3VvPAUSDDoxSGoQJq54BSwcSSxC+syGXgFOANNm1f9aFkVM8Oy7BpLJivGSWQOLgPrIQYRj1jpnhJDq0XYSa6amB8+a6GX5UmPWUXagYQwcpwslViP+V3lh4ie6t55ZbYctllaY5LH45JReolOu3w6VeVFmH8vpAB3BBgmV/+IUD/upsNH+YQ/w9Fli6HZH/BDj5ogFOGCemMSgK47H7GV88jikmfcBWRS41UZS9BiJtuyvBtzTovFeYfNvWCF8yum39Z86z5ZwJ7W54sBgfsd/Bb8MoA0mo5o6rlGQ5egP5WCqsc+IddZEEeHaLSElEsGU7erO2ng7ThVZTvEoTJY2nY2uMEwDR0KsXIcXocdlQcTLdgWe00clp/ZvkF5ay7y3lOzxsOEAGjm1vVPd2Rit9M4cwrktVh45yKpRAxXpSxFBIWyc8K6rj8Ml+yMMdolGfkQNI+/vgUzmvzZJXU4U1oQKqMY2aO2sl/xiOROerIRYU6EGupp67cWhU0IcRzgj3VSxrcd3QpdiBTq2RiZKhFS6c73IjZf0/YbOaEo/PQ0wM+BvRwsbelLiEDPmN8mrx+n7UKB6QzXcdbeDBCTgh3XuPfdO2D8PvmqJbkjdnm6hh7EF7k0BcNgwhRMatD4MkuwTLFiJIDaPZlE/UehAwFWaEEtp3KCQkWim5TpkEwMgefH+eCleDj40=,iv:K/CJeW2P3gFy5sRC/LjCvKQkNE/KvWxmW4uQ3SQ62ek=,tag:VzQo6WqsTfkzTTOgO8ll2g==,type:str]
        key: ""
    discovery:
        enabled: true
        registries:
            kubernetes:
                disabled: false
            service:
                disabled: false
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age19963x2afvcsek4p5sas5n05thusjvzz7gpfknp20666u69jw44lsu5w4u5
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBiSjRkQ2hRSmVJdzkrdXN1
            dVh0NzY2cTdyRmxidG1wVU4wemZsQXA4Y0g4CnMvSC93YjhZSUZ6MFd6WlpIQ3N6
            MmNHV1ZVRmwyWUp3R1RPTjk1ejQrdU0KLS0tIHhhM1RUZkdKQ1FnM0pvVHIySXk2
            dUtqWE1ad29BMmhUNmY5ZEF4YXphWHcKeLZ/ix3DBYSJcOIRH/GlKmJb9OQ22d0d
            j6IG2Lw6KH+8nC+VgvuoXfsEhjwkUgwyOKRo4Tv1sdVS0TV+IuZtwQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-05-21T19:01:44Z"
    mac: ENC[AES256_GCM,data:B8ZQyn8Qw1gaeX0usbPuwlFG/ou75d3IV2kK0lhaaYhOQD6RP/VDhH4Dr+RoG6U+FudEHTBGQ/SICZterrofGBHsuVDbrFcg015yHZ06WUq9YhkGcg7RcFZZu68OrieF5NCChElk54oNCUoWMa3sYy26GwXoqlFiG/UiVdyVSmQ=,iv:aNRQtBlIIbOXz1sCS/a5SQrGGwgyFnbSBLGAI7XUl54=,tag:w99EgU79dBH8pnlAhYKVEg==,type:str]
    pgp: []
    encrypted_regex: ^(token|crt|key|id|secret|secretboxEncryptionSecret|ca)$
    version: 3.8.1
